import{c as D,r as s,k as Ce,j as e,u as Se}from"./index-CgSx9xry.js";import{u as Te,H as fe}from"./header-CDH6kwUi.js";import{B as H,m as be}from"./Tommy logo-DiWLNgrB.js";import{C as J,a as K,b as Re,c as We}from"./card-unpa1ra1.js";import{P as Me}from"./progress-DQ5XjpjX.js";import{u as Ae,V as Pe}from"./use-audio-Cjn4WULS.js";import{M as we}from"./mic-CFU6QpYU.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=D("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=D("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=D("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=D("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=D("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=D("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=D("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);function Be(){const[i,d]=s.useState(!1),[V,$]=s.useState(""),[B,y]=s.useState(""),[U,S]=s.useState(0),k=s.useRef(null),v=s.useRef(null),h=s.useRef(!1),M="webkitSpeechRecognition"in window||"SpeechRecognition"in window,A=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<768||"ontouchstart"in window||navigator.maxTouchPoints>0,T=s.useCallback(()=>{v.current&&(clearTimeout(v.current),v.current=null),h.current=!1},[]),Q=s.useCallback(()=>{if(console.log("Stopping speech recognition"),T(),k.current){try{k.current.stop()}catch(j){console.warn("Error stopping recognition:",j)}k.current=null}d(!1),y("")},[T]),R=s.useCallback(()=>{if(!M){console.warn("Speech recognition not supported");return}if(i&&k.current){console.log("Already listening, not starting again");return}console.log("Starting speech recognition - Mobile:",A),T();const j=window.SpeechRecognition||window.webkitSpeechRecognition,u=new j;u.continuous=!0,u.interimResults=!0,u.lang="en-US",u.maxAlternatives=1,A&&(u.continuous=!1,u.interimResults=!1);let N=V,P=Date.now(),C=0;u.onstart=()=>{console.log("Speech recognition started"),d(!0),y(""),P=Date.now(),C=0,h.current=!1},u.onresult=f=>{let E="",W="",F=0;for(let O=f.resultIndex;O<f.results.length;O++){const z=f.results[O],L=z[0].transcript,Y=z[0].confidence||0;z.isFinal?(W+=L,F=Math.max(F,Y),console.log("Final result:",L,"Confidence:",Y)):E+=L}W&&(N+=W,$(N),S(F),P=Date.now(),A&&!h.current&&(console.log("Mobile: Restarting recognition after final result"),h.current=!0,v.current=setTimeout(()=>{i&&R()},300))),y(E),(W||E)&&(P=Date.now())},u.onerror=f=>{switch(console.error("Speech recognition error:",f.error,f),f.error){case"network":console.log("Network error - will retry in 2 seconds"),d(!1),h.current||(h.current=!0,v.current=setTimeout(()=>{i&&R()},2e3));break;case"aborted":console.log("Recognition aborted - this is expected during stop"),d(!1);break;case"no-speech":C++,console.log(`No speech detected (${C} times)`),C>=3&&(console.log("Too many no-speech events, restarting"),h.current||(h.current=!0,v.current=setTimeout(()=>{i&&R()},1e3)));break;case"audio-capture":console.log("Audio capture error - microphone may be in use"),d(!1);break;case"not-allowed":console.log("Microphone access denied"),d(!1);break;default:console.log("Other error, attempting restart"),d(!1),h.current||(h.current=!0,v.current=setTimeout(()=>{i&&R()},1500))}},u.onend=()=>{if(console.log("Speech recognition ended"),i&&!h.current){const f=Date.now()-P;console.log(`Recognition ended unexpectedly. Time since last activity: ${f}ms`),f<3e4?(console.log("Auto-restarting recognition"),h.current=!0,v.current=setTimeout(()=>{i&&R()},500)):(console.log("No recent activity, stopping recognition"),d(!1))}else d(!1);y("")};try{k.current=u,u.start()}catch(f){console.error("Error starting recognition:",f),d(!1)}},[M,i,V,A,T]),w=s.useCallback(()=>{console.log("Resetting transcript"),$(""),y(""),S(0)},[]);return s.useEffect(()=>()=>{if(T(),k.current)try{k.current.stop()}catch(j){console.warn("Error stopping recognition on cleanup:",j)}},[T]),{isListening:i,transcript:V,interimTranscript:B,confidence:U,startListening:R,stopListening:Q,resetTranscript:w,isSupported:M}}function De({title:i,text:d,onComplete:V,onControlsReady:$}){const[B,y]=s.useState(""),[U,S]=s.useState(!1),[k,v]=s.useState({x:0,y:0}),[h,M]=s.useState(!1),[A,T]=s.useState(0),[Q,R]=s.useState([]),[w,j]=s.useState(!1),[u,N]=s.useState(0),[P,C]=s.useState(!1),f=s.useRef(null),E=s.useRef(null),{playText:W,pauseAudio:F,resumeAudio:O,stopAudio:z,isPlaying:L,isPaused:Y,currentUtterance:re}=Ae(),{isListening:ke,transcript:I,startListening:ee,stopListening:oe,resetTranscript:X,isSupported:te,confidence:G,interimTranscript:se}=Be(),{toast:g}=Ce();s.useEffect(()=>{const t=i.split(/\s+/).filter(r=>r.length>0),c=d.split(/\s+/).filter(r=>r.length>0),a=[...t,...c].map(r=>({word:r.replace(/[.,!?;:]/g,""),status:"unread"}));R(a)},[i,d]);const q=s.useCallback(()=>{if(w||L){console.log("Already in auto reading mode or playing, skipping");return}if(speechSynthesis.speaking){z(),setTimeout(()=>{q()},300);return}console.log("Starting auto reading - clean state"),j(!0),C(!1),N(-1);const t=i.split(/\s+/).filter(o=>o.length>0),c=d.split(/\s+/).filter(o=>o.length>0),p=`${i}. ${d}`;if(!p.trim()){console.error("No content to read"),j(!1);return}const a=s.useCallback((o,n)=>{requestAnimationFrame(()=>{const x=n?`[data-word-index="title-${o}"]`:`[data-word-index="text-${o}"]`,m=document.querySelector(x);if(m){const l=m.getBoundingClientRect(),b=window.innerWidth<640,je=(b?60:80)+(b?100:120)+20,Ne=window.scrollY+l.top-je;window.scrollTo({top:Math.max(0,Ne),behavior:"smooth"})}})},[]),r=(o,n)=>{console.log(`Word boundary triggered: "${o}" at index ${n}`);const x=t.length;if(n<x)N(n),a(n,!0),console.log(`Highlighting title word ${n}: "${o}"`);else{const m=n-x-1;if(m>=0&&m<c.length){const l=x+m;N(l),a(m,!1),console.log(`Highlighting text word ${l}: "${o}"`),m>=c.length-1&&(console.log("Last word reached, finishing reading"),setTimeout(()=>{j(!1),C(!1),N(-1),g({title:"🎉 Leitura concluída!",description:"Professor Tommy terminou de ler o texto."})},1e3))}}};console.log("Starting auto reading with word boundary sync");try{W(p,"en-US",0,r),setTimeout(()=>{N(0),a(0,!0),console.log("First word highlighted at start")},100),g({title:"🎯 Professor Tommy lendo o texto",description:"Voz e destaque sincronizados"})}catch(o){console.error("Error starting auto reading:",o),j(!1),N(-1),g({title:"❌ Erro na leitura",description:"Não foi possível iniciar a leitura automática.",variant:"destructive"})}},[i,d,W,g,w]),ae=s.useCallback(()=>{console.log("Pausing auto reading - maintaining word sync"),C(!0),L&&F(),console.log(`Paused at word index: ${u}`),g({title:"⏸️ Professor Tommy pausado",description:"Voz e destaque pausados na mesma palavra"})},[L,F,u,g]),ne=s.useCallback(()=>{if(!w){console.log("Not in auto reading mode, starting fresh"),q();return}if(console.log("Resuming auto reading from word:",u),P&&speechSynthesis.paused&&speechSynthesis.speaking&&re)try{O(),C(!1),console.log("Successfully resumed paused speech"),g({title:"▶️ Professor Tommy retomando",description:"Voz e destaque continuando juntos"});return}catch(t){console.warn("Failed to resume paused audio:",t)}if(u>0){console.log(`Resuming from word: ${u}`);const t=i.split(/\s+/).filter(a=>a.length>0),c=d.split(/\s+/).filter(a=>a.length>0),p=[...t,...c];if(u<p.length){const r=p.slice(u).join(" ");C(!1),W(r,"en-US",0,(n,x)=>{const m=u+x;console.log(`Resume boundary: word "${n}" at global index ${m}`),N(m);const l=t.length;if(m<l)scrollToWord(m,!0);else{const b=m-l;scrollToWord(b,!1)}}),g({title:"▶️ Professor Tommy continuando",description:`Retomando da palavra ${u+1}`});return}}console.log("Restarting from beginning due to resume failure"),j(!1),C(!1),N(-1),z(),setTimeout(()=>{q()},500),g({title:"🔄 Reiniciando leitura",description:"Recomeçando do início"})},[w,P,u,re,O,g,z,q,i,d,W]),le=s.useCallback(()=>{console.log("Stopping auto reading - full reset"),j(!1),C(!1),N(-1),E.current&&clearTimeout(E.current),(L||Y)&&z(),console.log("Auto reading stopped - voz e highlight resetados"),g({title:"⏹️ Professor Tommy parado",description:"Leitura automática interrompida"})},[L,Y,z,g]),ie=s.useCallback(()=>{if(h){oe(),M(!1);const t=Math.round(A);t>=80?g({title:"🎉 Parabéns!",description:`Você leu ${t}% do texto com sucesso!`}):g({title:"📖 Leitura finalizada",description:`Você leu ${t}% do texto. Continue praticando!`})}else te?navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0}).then(()=>{M(!0),X(),T(0),ee(),g({title:"🎤 Modo de leitura ativado",description:"Comece a ler o texto em voz alta..."})}).catch(t=>{console.error("Microphone permission denied:",t),g({title:"🎤 Acesso ao microfone negado",description:"Permita o acesso ao microfone para usar o reconhecimento de voz.",variant:"destructive"})}):(M(!0),X(),T(0),ee(),g({title:"🎤 Modo de leitura ativado",description:"Comece a ler o texto em voz alta..."})):g({title:"❌ Recurso não disponível",description:"Seu navegador não suporta reconhecimento de voz. Use Chrome, Edge ou Safari.",variant:"destructive"})},[h,A,te,oe,X,ee,g]),ce=s.useCallback(()=>{X(),T(0);const t=i.split(/\s+/).filter(r=>r.length>0),c=d.split(/\s+/).filter(r=>r.length>0),a=[...t,...c].map(r=>({word:r.replace(/[.,!?;:]/g,""),status:"unread"}));R(a),g({title:"🔄 Leitura reiniciada",description:"Comece novamente a leitura do texto."})},[i,d,X,g]),de=s.useCallback(()=>e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[!w||P?e.jsx(H,{onClick:w?ne:q,className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gradient-to-br from-teal-500 to-teal-600 hover:from-teal-600 hover:to-teal-700 text-white shadow-lg hover:shadow-xl transition-all duration-200",title:w?"Continuar leitura guiada":"Iniciar leitura guiada",children:e.jsx(Ee,{size:14,className:"sm:w-4 sm:h-4"})}):e.jsx(H,{onClick:ae,className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gradient-to-br from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 text-white shadow-lg hover:shadow-xl transition-all duration-200",title:"Pausar leitura guiada",children:e.jsx($e,{size:14,className:"sm:w-4 sm:h-4"})}),w&&e.jsx(H,{onClick:le,className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gradient-to-br from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white shadow-lg hover:shadow-xl transition-all duration-200",title:"Parar leitura guiada",children:e.jsx(He,{size:14,className:"sm:w-4 sm:h-4"})}),e.jsx(H,{onClick:ie,className:`w-8 h-8 sm:w-10 sm:h-10 rounded-full ${h?"bg-gradient-to-br from-red-500 to-red-600 hover:from-red-600 hover:to-red-700":"bg-gradient-to-br from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700"} text-white shadow-lg hover:shadow-xl transition-all duration-200`,title:h?"Parar reconhecimento":"Iniciar reconhecimento de voz",children:h?e.jsx(Le,{size:14,className:"sm:w-4 sm:h-4"}):e.jsx(we,{size:14,className:"sm:w-4 sm:h-4"})}),e.jsx(H,{onClick:ce,disabled:!I,className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gradient-to-br from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 disabled:from-gray-300 disabled:to-gray-400 text-white shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50",title:"Reiniciar leitura",children:e.jsx(Ie,{size:14,className:"sm:w-4 sm:h-4"})})]}),[w,P,h,I,q,ne,ae,le,ie,ce]);s.useEffect(()=>{$&&$(de())},[de,$]);const ve=(t,c)=>{const p=t.toLowerCase().replace(/[.,!?;:]/g,""),a=c.toLowerCase().replace(/[.,!?;:]/g,"");if(p===a)return 1;const r=p.length,o=a.length,n=[];for(let l=0;l<=o;l++)n[l]=[l];for(let l=0;l<=r;l++)n[0][l]=l;for(let l=1;l<=o;l++)for(let b=1;b<=r;b++)a.charAt(l-1)===p.charAt(b-1)?n[l][b]=n[l-1][b-1]:n[l][b]=Math.min(n[l-1][b-1]+1,n[l][b-1]+1,n[l-1][b]+1);const x=n[o][r],m=Math.max(r,o);return m===0?1:1-x/m},ue=s.useCallback(t=>{const c=t.toLowerCase().split(/\s+/).filter(o=>o.length>0),p=i.split(/\s+/).filter(o=>o.length>0),a=d.split(/\s+/).filter(o=>o.length>0),r=[...p,...a];R(o=>{const n=[...o];return c.forEach(x=>{let m=-1,l=0;r.forEach((b,xe)=>{const _=ve(b,x);_>l&&_>.3&&(l=_,m=xe)}),m!==-1&&n[m]&&(l>=.9?n[m].status="correct":l>=.6?n[m].status="close":n[m].status="incorrect")}),n})},[i,d]),me=s.useCallback(t=>{const c=i.split(/\s+/).length,p=d.split(/\s+/).length,a=c+p,r=t.split(/\s+/).filter(o=>o.length>0).length;return Math.min(r/a*100,100)},[i,d]);s.useEffect(()=>{if(I){const t=me(I);T(t),ue(I)}},[I,me,ue]);const ge=()=>{const t=window.getSelection();if(t&&t.toString().trim()){const c=t.toString().trim();if(y(c),t.rangeCount>0){const a=t.getRangeAt(0).getBoundingClientRect();v({x:a.left+a.width/2,y:a.bottom+window.scrollY+5}),S(!0)}}else y(""),S(!1)},Z=(t,c)=>{c.preventDefault(),c.stopPropagation();const p=t.replace(/[.,!?;:]/g,"");y(p);const a=c.target.getBoundingClientRect(),r=window.innerWidth<640;v({x:a.left+a.width/2,y:a.bottom+window.scrollY+(r?10:5)}),S(!0)},he=t=>{B&&(W(B),S(!1),y(""),g({title:"🔊 Reproduzindo seleção",description:"Ouvindo o texto selecionado..."}))},pe=t=>{f.current&&!f.current.contains(t.target)&&(S(!1),y(""))};return s.useEffect(()=>(document.addEventListener("mousedown",pe),()=>{document.removeEventListener("mousedown",pe)}),[]),s.useEffect(()=>()=>{E.current&&clearTimeout(E.current)},[]),e.jsxs("div",{className:"max-w-4xl mx-auto p-3 sm:p-6 space-y-4 sm:space-y-6",children:[e.jsx(J,{className:"border-2 border-cartoon-gray",children:e.jsxs(K,{className:"relative p-3 sm:p-6",children:[e.jsxs("div",{ref:f,className:"text-base sm:text-lg leading-relaxed p-3 sm:p-4 bg-white dark:bg-gray-50 rounded-lg border border-gray-200 dark:border-gray-300 cursor-text select-text break-words whitespace-pre-wrap overflow-wrap-anywhere min-h-[200px] sm:min-h-[300px]",onMouseUp:ge,onTouchEnd:ge,style:{userSelect:"text",wordBreak:"break-word",overflowWrap:"break-word",WebkitTouchCallout:"none",WebkitUserSelect:"text"},children:[e.jsx("div",{className:"mb-4 text-center",children:e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-cartoon-dark mb-3 leading-normal",children:i.split(/\s+/).map((t,c)=>{i.split(/\s+/).length;const p=w&&u===c&&u>=0,a=Q[c];let r="";if(p)r="bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg sm:shadow-xl scale-105 sm:scale-110 font-bold border-2 border-blue-300 transform animate-pulse";else switch(a==null?void 0:a.status){case"correct":r="bg-green-200 dark:bg-green-300 text-green-800 dark:text-green-900 border border-green-300 dark:border-green-400";break;case"close":r="bg-yellow-200 dark:bg-yellow-300 text-yellow-800 dark:text-yellow-900 border border-yellow-300 dark:border-yellow-400";break;case"incorrect":r="bg-red-200 dark:bg-red-300 text-red-800 dark:text-red-900 border border-red-300 dark:border-red-400";break;default:r="text-gray-800 dark:text-gray-700 hover:bg-blue-50 dark:hover:bg-blue-100"}return e.jsx("span",{"data-word-index":`title-${c}`,className:`${r} px-1 sm:px-2 py-0.5 sm:py-1 rounded-md transition-all duration-200 mr-1 sm:mr-2 inline-block cursor-pointer touch-manipulation select-none`,style:{userSelect:"none",WebkitTapHighlightColor:"transparent"},onClick:o=>Z(t,o),onTouchStart:o=>o.preventDefault(),onTouchEnd:o=>{o.preventDefault(),Z(t,o)},children:t},`title-${c}`)})})}),e.jsx("div",{className:"text-justify leading-relaxed",children:d.split(/\s+/).map((t,c)=>{const a=i.split(/\s+/).length+c,r=Q[a],o=w&&u===a&&u>=0;let n="";if(o)n="bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg sm:shadow-xl scale-105 sm:scale-110 font-bold border-2 border-blue-300 transform animate-pulse";else switch(r==null?void 0:r.status){case"correct":n="bg-green-200 dark:bg-green-300 text-green-800 dark:text-green-900 border border-green-300 dark:border-green-400";break;case"close":n="bg-yellow-200 dark:bg-yellow-300 text-yellow-800 dark:text-yellow-900 border border-yellow-300 dark:border-yellow-400";break;case"incorrect":n="bg-red-200 dark:bg-red-300 text-red-800 dark:text-red-900 border border-red-300 dark:border-red-400";break;default:n="text-gray-800 dark:text-gray-700 hover:bg-blue-50 dark:hover:bg-blue-100"}return e.jsx("span",{"data-word-index":`text-${c}`,className:`${n} px-1 sm:px-2 py-0.5 sm:py-1 mx-0.5 rounded-md transition-all duration-200 cursor-pointer touch-manipulation select-none inline-flex items-center justify-center`,style:{wordBreak:"keep-all",userSelect:"none",WebkitTapHighlightColor:"transparent"},onClick:x=>Z(t,x),onTouchStart:x=>x.preventDefault(),onTouchEnd:x=>{x.preventDefault(),Z(t,x)},children:t},`text-${c}`)})})]}),U&&B&&e.jsx(be.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:[1,1.1,1]},exit:{opacity:0,scale:.5},transition:{scale:{duration:.8,repeat:1/0,ease:"easeInOut"}},className:"fixed z-50 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-full p-2 sm:p-3 shadow-2xl cursor-pointer hover:from-blue-600 hover:to-blue-700 transition-all border-2 border-white",style:{left:`${Math.max(20,Math.min(window.innerWidth-60,k.x-20))}px`,top:`${Math.max(80,k.y)}px`,transform:"translateX(-50%)",WebkitTapHighlightColor:"transparent"},onClick:t=>he(),onTouchEnd:t=>{t.preventDefault(),he()},children:e.jsx(Pe,{size:18,className:"sm:w-5 sm:h-5 drop-shadow-sm"})}),(h||w)&&e.jsxs("div",{className:"mt-4 p-3 sm:p-4 bg-gray-50 dark:bg-gray-100 rounded-lg border border-gray-200 dark:border-gray-300",children:[e.jsx("p",{className:"text-sm sm:text-base font-semibold text-gray-700 dark:text-gray-800 mb-2 sm:mb-3",children:"Legenda de Cores:"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-2 sm:gap-4 text-xs sm:text-sm",children:[w&&e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 col-span-2 sm:col-span-1",children:[e.jsx("span",{className:"w-3 h-3 sm:w-4 sm:h-4 bg-blue-500 rounded shadow-lg animate-pulse"}),e.jsx("span",{className:"font-semibold text-blue-700",children:"Palavra Atual"})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("span",{className:"w-3 h-3 sm:w-4 sm:h-4 bg-green-200 dark:bg-green-300 rounded border border-green-300"}),e.jsx("span",{className:"text-green-700",children:"Correta"})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("span",{className:"w-3 h-3 sm:w-4 sm:h-4 bg-yellow-200 dark:bg-yellow-300 rounded border border-yellow-300"}),e.jsx("span",{className:"text-yellow-700",children:"Próxima"})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("span",{className:"w-3 h-3 sm:w-4 sm:h-4 bg-red-200 dark:bg-red-300 rounded border border-red-300"}),e.jsx("span",{className:"text-red-700",children:"Melhorar"})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("span",{className:"w-3 h-3 sm:w-4 sm:h-4 bg-gray-200 dark:bg-gray-300 rounded border border-gray-300"}),e.jsx("span",{className:"text-gray-700",children:"Não Lida"})]})]})]})]})}),ke&&e.jsx(J,{className:"border-2 border-cartoon-coral",children:e.jsx(K,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-2 sm:gap-3 text-cartoon-coral",children:[e.jsx(be.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:1},className:"flex items-center justify-center",children:e.jsx(we,{size:20,className:"sm:w-6 sm:h-6"})}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("span",{className:"font-medium text-sm sm:text-base block",children:"Ouvindo... Leia o texto!"}),e.jsx("span",{className:"text-xs sm:text-sm text-cartoon-coral/80 hidden sm:block",children:"Pronuncie as palavras claramente"})]})]})})}),(I||se)&&e.jsx(J,{className:"border-2 border-blue-200 dark:border-blue-300",children:e.jsx(K,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-700 font-medium",children:"O que você disse:"}),G>0&&e.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${G>=.8?"bg-green-100 text-green-700":G>=.6?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[Math.round(G*100),"% confiança"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs sm:text-sm text-blue-600 dark:text-blue-700 font-semibold",children:["Progresso: ",Math.round(A),"%"]}),e.jsx(Me,{value:A,className:"w-20 sm:w-24 h-2"})]})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-100 p-3 rounded-lg border border-blue-200 dark:border-blue-300",children:e.jsxs("p",{className:"text-gray-800 dark:text-gray-900 text-sm sm:text-base break-words",children:[I,se&&e.jsx("span",{className:"text-gray-500 italic ml-1",children:se})]})})]})})}),!te&&e.jsx(J,{className:"border-2 border-yellow-200 dark:border-yellow-300",children:e.jsx(K,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"text-yellow-600 text-lg",children:"⚠️"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-800 dark:text-yellow-900 text-sm sm:text-base font-medium mb-1",children:"Reconhecimento de voz não disponível"}),e.jsx("p",{className:"text-yellow-700 dark:text-yellow-800 text-xs sm:text-sm",children:"Use Chrome, Edge ou Safari para ativar o reconhecimento de voz."})]})]})})})]})}function Je(){const[,i]=Se(),[d,V]=s.useState(!1),[$,B]=s.useState(null),{data:y}=Te({queryKey:["/api/user"]}),U=()=>{V(!0)},S=()=>{i("/lessons")},k=s.useCallback(M=>{B(M)},[]);return d?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-sky-50 to-teal-50 pt-16 sm:pt-20",children:[e.jsx(fe,{user:y}),e.jsx("main",{className:"max-w-4xl mx-auto px-3 sm:px-4 lg:px-8 py-4 sm:py-6 lg:py-8",children:e.jsxs(J,{className:"border-2 border-green-200 bg-green-50",children:[e.jsx(Re,{className:"text-center",children:e.jsx(We,{className:"text-2xl sm:text-3xl text-green-800 mb-4",children:"🎉 Parabéns!"})}),e.jsxs(K,{className:"text-center",children:[e.jsx("p",{className:"text-lg text-green-700 mb-6",children:"Você concluiu sua primeira aula de leitura!"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(H,{onClick:S,className:"bg-blue-500 hover:bg-blue-600 text-white",children:[e.jsx(ye,{className:"mr-2 h-4 w-4"}),"Voltar às Aulas"]}),e.jsxs(H,{onClick:()=>i("/home"),className:"bg-green-500 hover:bg-green-600 text-white",children:[e.jsx(ze,{className:"mr-2 h-4 w-4"}),"Ir para Home"]})]})]})]})})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-sky-50 to-teal-50",children:[e.jsx(fe,{user:y,audioControls:$,showAudioControls:!0}),e.jsxs("main",{className:"pt-20 sm:pt-24",children:[e.jsx("div",{className:"max-w-4xl mx-auto px-3 sm:px-4 lg:px-8 mb-4",children:e.jsxs(H,{onClick:S,variant:"ghost",className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-gray-100",children:[e.jsx(ye,{size:16}),"Voltar"]})}),e.jsx(De,{title:"My First Day at School",text:`Today was my first day at school. I was very excited and a little nervous. I woke up early and had breakfast with my family. My mom packed my lunch and gave me a big hug. 

At school, I met my teacher, Miss Johnson. She was very kind and friendly. She showed me around the classroom and introduced me to my new classmates. Everyone was welcoming and I made some new friends quickly.

We started with reading time. I love reading stories about adventures and magical places. After that, we had math class where we learned about numbers and counting. 

During lunch break, I played with my new friends in the playground. We had so much fun on the swings and slides. 

In the afternoon, we had art class. We drew pictures of our families and colored them with bright crayons. I drew my mom, dad, and my little sister.

When school finished, my mom was waiting for me at the gate. I told her all about my wonderful first day. I can't wait to go back tomorrow and learn more new things!`,onComplete:U,onControlsReady:k})]})]})}export{Je as default};
