import{c as F,r as a,j as e,a as S,b as J,d as $,e as G,f as W,P as O,g as A,h as Y,i as Z,k as ee,u as te,l as se,m as T}from"./index-CgSx9xry.js";import{u as U,B as L,m as re,t as ae}from"./Tommy logo-DiWLNgrB.js";import{L as E,U as oe,I as z}from"./label-CyiGl8lW.js";import{C as ne,b as ce,c as ie,a as le}from"./card-unpa1ra1.js";import{L as de}from"./lock-DkilWq6s.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=F("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=F("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=F("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=F("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]),xe=J("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),_=a.forwardRef(({className:s,variant:o,...r},i)=>e.jsx("div",{ref:i,role:"alert",className:S(xe({variant:o}),s),...r}));_.displayName="Alert";const fe=a.forwardRef(({className:s,...o},r)=>e.jsx("h5",{ref:r,className:S("mb-1 font-medium leading-none tracking-tight",s),...o}));fe.displayName="AlertTitle";const H=a.forwardRef(({className:s,...o},r)=>e.jsx("div",{ref:r,className:S("text-sm [&_p]:leading-relaxed",s),...o}));H.displayName="AlertDescription";function ge(s){const o=a.useRef({value:s,previous:s});return a.useMemo(()=>(o.current.value!==s&&(o.current.previous=o.current.value,o.current.value=s),o.current.previous),[s])}var D="Checkbox",[be,Le]=$(D),[ve,ye]=be(D),K=a.forwardRef((s,o)=>{const{__scopeCheckbox:r,name:i,checked:f,defaultChecked:c,required:g,disabled:h,value:j="on",onCheckedChange:l,form:p,...u}=s,[d,b]=a.useState(null),C=G(o,n=>b(n)),v=a.useRef(!1),P=d?p||!!d.closest("form"):!0,[y=!1,x]=W({prop:f,defaultProp:c,onChange:l}),w=a.useRef(y);return a.useEffect(()=>{const n=d==null?void 0:d.form;if(n){const N=()=>x(w.current);return n.addEventListener("reset",N),()=>n.removeEventListener("reset",N)}},[d,x]),e.jsxs(ve,{scope:r,state:y,disabled:h,children:[e.jsx(O.button,{type:"button",role:"checkbox","aria-checked":k(y)?"mixed":y,"aria-required":g,"data-state":V(y),"data-disabled":h?"":void 0,disabled:h,value:j,...u,ref:C,onKeyDown:A(s.onKeyDown,n=>{n.key==="Enter"&&n.preventDefault()}),onClick:A(s.onClick,n=>{x(N=>k(N)?!0:!N),P&&(v.current=n.isPropagationStopped(),v.current||n.stopPropagation())})}),P&&e.jsx(ke,{control:d,bubbles:!v.current,name:i,value:j,checked:y,required:g,disabled:h,form:p,style:{transform:"translateX(-100%)"},defaultChecked:k(c)?!1:c})]})});K.displayName=D;var B="CheckboxIndicator",Q=a.forwardRef((s,o)=>{const{__scopeCheckbox:r,forceMount:i,...f}=s,c=ye(B,r);return e.jsx(Y,{present:i||k(c.state)||c.state===!0,children:e.jsx(O.span,{"data-state":V(c.state),"data-disabled":c.disabled?"":void 0,...f,ref:o,style:{pointerEvents:"none",...s.style}})})});Q.displayName=B;var ke=s=>{const{control:o,checked:r,bubbles:i=!0,defaultChecked:f,...c}=s,g=a.useRef(null),h=ge(r),j=Z(o);a.useEffect(()=>{const p=g.current,u=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(u,"checked").set;if(h!==r&&b){const C=new Event("click",{bubbles:i});p.indeterminate=k(r),b.call(p,k(r)?!1:r),p.dispatchEvent(C)}},[h,r,i]);const l=a.useRef(k(r)?!1:r);return e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:f??l.current,...c,tabIndex:-1,ref:g,style:{...s.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function k(s){return s==="indeterminate"}function V(s){return k(s)?"indeterminate":s?"checked":"unchecked"}var X=K,je=Q;const q=a.forwardRef(({className:s,...o},r)=>e.jsx(X,{ref:r,className:S("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...o,children:e.jsx(je,{className:S("flex items-center justify-center text-current"),children:e.jsx(me,{className:"h-4 w-4"})})}));q.displayName=X.displayName;function Fe(){const[s,o]=a.useState(!0),[r,i]=a.useState({username:"",email:"",password:""}),[f,c]=a.useState(!1),[g,h]=a.useState(!1),[j,l]=a.useState(""),[p,u]=a.useState(!1),{toast:d}=ee(),[,b]=te(),C=se(),v=()=>{const t=document.documentElement;t.requestFullscreen?t.requestFullscreen().then(()=>u(!0)):t.webkitRequestFullscreen?(t.webkitRequestFullscreen(),u(!0)):t.msRequestFullscreen&&(t.msRequestFullscreen(),u(!0))},P=()=>{document.exitFullscreen?document.exitFullscreen().then(()=>u(!1)):document.webkitExitFullscreen?(document.webkitExitFullscreen(),u(!1)):document.msExitFullscreen&&(document.msExitFullscreen(),u(!1))},y=()=>{p?P():v()};a.useEffect(()=>{const t=()=>{const m=!!(document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement);u(m)};return document.addEventListener("fullscreenchange",t),document.addEventListener("webkitfullscreenchange",t),document.addEventListener("msfullscreenchange",t),()=>{document.removeEventListener("fullscreenchange",t),document.removeEventListener("webkitfullscreenchange",t),document.removeEventListener("msfullscreenchange",t)}},[]),a.useEffect(()=>{const t=localStorage.getItem("rememberedUsername"),m=localStorage.getItem("savedPassword"),R=localStorage.getItem("autoLogin")==="true";localStorage.getItem("rememberUsername")==="true"&&t&&(i(M=>({...M,username:t})),c(!0)),R&&t&&m&&(i(M=>({...M,username:t,password:m})),h(!0),c(!0),setTimeout(()=>{x.mutate({username:t,password:m})},500))},[]);const x=U({mutationFn:async t=>(await T("POST","/api/auth/login",t)).json(),onSuccess:()=>{f?(localStorage.setItem("rememberedUsername",r.username),localStorage.setItem("rememberUsername","true")):(localStorage.removeItem("rememberedUsername"),localStorage.removeItem("rememberUsername")),g?(localStorage.setItem("savedPassword",r.password),localStorage.setItem("autoLogin","true")):(localStorage.removeItem("savedPassword"),localStorage.removeItem("autoLogin")),d({title:"Login realizado com sucesso!",description:"Entrando em modo fullscreen..."}),setTimeout(()=>{v()},500),C.invalidateQueries({queryKey:["/api/user"]}),setTimeout(()=>{b("/home")},1e3)},onError:t=>{l("Usuário ou senha incorretos")}}),w=U({mutationFn:async t=>(await T("POST","/api/auth/register",t)).json(),onSuccess:()=>{d({title:"Conta criada com sucesso!",description:"Entrando em modo fullscreen..."}),setTimeout(()=>{v()},500),C.invalidateQueries({queryKey:["/api/user"]}),setTimeout(()=>{b("/home")},1e3)},onError:t=>{l("Erro ao criar conta. Tente outro nome de usuário.")}}),n=U({mutationFn:async()=>(await T("POST","/api/auth/guest",{})).json(),onSuccess:()=>{d({title:"Entrando como convidado!",description:"Entrando em modo fullscreen..."}),setTimeout(()=>{v()},500),C.invalidateQueries({queryKey:["/api/user"]}),setTimeout(()=>{b("/home")},1e3)},onError:t=>{l("Erro ao entrar como convidado. Tente novamente.")}}),N=t=>{if(t.preventDefault(),l(""),s){if(!r.username||!r.password){l("Por favor, preencha todos os campos");return}x.mutate({username:r.username,password:r.password})}else{if(!r.username||!r.email||!r.password){l("Por favor, preencha todos os campos");return}w.mutate(r)}},I=(t,m)=>{i(R=>({...R,[t]:m})),l("")};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-sky-50 to-teal-50 flex items-center justify-center p-4 sm:p-6 lg:p-8",children:[e.jsx(L,{onClick:y,className:"fixed top-4 right-4 z-50 cartoon-button-secondary p-2",size:"sm",title:p?"Sair do modo fullscreen":"Entrar em modo fullscreen",children:p?e.jsx(pe,{size:20}):e.jsx(he,{size:20})}),e.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md mx-auto",children:[e.jsx("div",{className:"text-center mb-4",children:e.jsx("div",{className:"flex flex-col items-center justify-center space-y-4 mb-4",children:e.jsx("img",{src:ae,alt:"Tommy's Academy Logo",className:"w-40 h-40 sm:w-48 sm:h-48 lg:w-56 lg:h-56 object-contain"})})}),e.jsxs(ne,{className:"cartoon-card border-cartoon-teal shadow-lg",children:[e.jsx(ce,{className:"text-center pb-4",children:e.jsx(ie,{className:"text-xl sm:text-2xl font-bold text-cartoon-dark",children:s?"Entrar":"Criar Conta"})}),e.jsxs(le,{className:"px-4 sm:px-6",children:[e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"username",className:"text-cartoon-dark font-semibold",children:"Nome de usuário"}),e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:"absolute left-3 top-3 text-gray-400",size:20}),e.jsx(z,{id:"username",type:"text",placeholder:"Digite seu nome de usuário",className:"pl-10 h-12 text-base border-2 border-gray-300 focus:border-cartoon-teal touch-target",value:r.username,onChange:t=>I("username",t.target.value),autoComplete:"username"})]})]}),!s&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"email",className:"text-cartoon-dark font-semibold",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(ue,{className:"absolute left-3 top-3 text-gray-400",size:20}),e.jsx(z,{id:"email",type:"email",placeholder:"Digite seu email",className:"pl-10 h-12 text-base border-2 border-gray-300 focus:border-cartoon-teal touch-target",value:r.email,onChange:t=>I("email",t.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"password",className:"text-cartoon-dark font-semibold",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(de,{className:"absolute left-3 top-3 text-gray-400",size:20}),e.jsx(z,{id:"password",type:"password",placeholder:"Digite sua senha",className:"pl-10 h-12 text-base border-2 border-gray-300 focus:border-cartoon-teal touch-target",value:r.password,onChange:t=>I("password",t.target.value),autoComplete:"current-password"})]})]}),s&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(q,{id:"rememberUsername",checked:f,onCheckedChange:t=>c(t)}),e.jsx(E,{htmlFor:"rememberUsername",className:"text-sm text-cartoon-dark",children:"Lembrar nome de usuário"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(q,{id:"autoLogin",checked:g,onCheckedChange:t=>{const m=t;h(m),m&&c(!0)}}),e.jsx(E,{htmlFor:"autoLogin",className:"text-sm text-cartoon-dark",children:"Login automático"})]})]}),j&&e.jsx(_,{className:"border-cartoon-red bg-red-50",children:e.jsx(H,{className:"text-cartoon-red",children:j})}),e.jsx(L,{type:"submit",disabled:x.isPending||w.isPending||n.isPending,className:"w-full cartoon-button h-10 sm:h-12 text-base sm:text-lg",children:x.isPending||w.isPending?"Processando...":s?"Entrar":"Criar Conta"})]}),s&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-white px-2 text-gray-500",children:"ou"})})]}),e.jsx(L,{type:"button",variant:"outline",disabled:n.isPending||x.isPending||w.isPending,onClick:()=>n.mutate(),className:"w-full mt-4 h-10 sm:h-12 text-base sm:text-lg border-2 border-gray-300 hover:border-cartoon-teal hover:bg-cartoon-teal/10 transition-colors",children:n.isPending?"Entrando...":"Entrar como Convidado"})]}),e.jsxs("div",{className:"text-center mt-4 sm:mt-6",children:[e.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:s?"Não tem uma conta?":"Já tem uma conta?"}),e.jsx(L,{variant:"link",onClick:()=>{o(!s),l(""),i({username:"",email:"",password:""})},className:"text-cartoon-teal font-semibold text-sm sm:text-base",children:s?"Criar nova conta":"Fazer login"})]})]})]})]})]})}export{Fe as default};
